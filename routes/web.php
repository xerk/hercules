<?php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\App;
use Illuminate\Support\Facades\Route;
use App\Http\Controllers\PurchaseController;
use App\Http\Controllers\ExtractDataController;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get('/', function () {
    return view('vendor.hercules.index');
});

Route::middleware(['auth:sanctum', 'verified'])->get('/dashboard', function () {
    return Inertia\Inertia::render('Dashboard');
})->name('dashboard');

Route::middleware(['auth:sanctum', 'verified'])->get('/dashboard/clients', [ExtractDataController::class, 'index'])->name('clients');
Route::middleware(['auth:sanctum', 'verified'])->put('/dashboard/clients', [ExtractDataController::class, 'export2'])->name('clients.export');
Route::middleware(['auth:sanctum', 'verified'])->get('/dashboard/{id}/download', [ExtractDataController::class, 'download'])->name('clients.download');

Route::middleware(['auth:sanctum', 'verified'])->get('/dashboard/purchase', [PurchaseController::class, 'index'])->name('purchase');
Route::middleware(['auth:sanctum', 'verified'])->post('/dashboard/purchase', [PurchaseController::class, 'redeem'])->name('purchase.redeem');


Route::get('lang/{locale}', function ($locale) {
    $validLocale = in_array($locale, ['ar', 'en']);
    if ($validLocale) {
        session()->put('locale', $locale);
        session()->get('locale');
    }
    return back();
});

Route::get('export', function () {
    $result = DB::table('clients')->orderBy('id')->select('unique_id', 'mobile', 'nationality')->whereIn('unique_id', [1443338669,
    100003095915683,
    100002283053959,
    100006240191737,
    100006192736902,
    722244803,
    100013513569117,
    100012907381000,
    100009251718027,
    100002358951033,
    100014588434459,
    100013578582088,
    100020625706038,
    100013060963768,
    100010753754830,
    100010420713913,
    840621925,
    100001078058518,
    100007628026448,
    100013244673875,
    100001932520323,
    1111571363,
    100005946587033,
    100010538084398,
    100011708887724,
    100000654996984,
    100002555054473,
    100005117914392,
    100004316492729,
    100001708562590,
    100004638725252,
    100007805470622,
    100007880320324,
    100003013001979,
    100013473180953,
    100022644076144,
    100001818901532,
    100015359883733,
    100013133806487,
    100001638192810,
    100017197209158,
    648045013,
    100004626094762,
    100000752466762,
    100001603946856,
    100005587159130,
    1132128578,
    100004152334007,
    603445123,
    1544358865,
    100005062485932,
    100010242396476,
    100007164333978,
    100002032436531,
    100013416240122,
    100000555297680,
    100010738175510,
    100003730074747,
    100021934666304,
    100025397408405,
    100004873262001,
    100011817847033,
    100002023975575,
    100016579879150,
    100004415710274,
    100002097947200,
    579837316,
    100009402497089,
    100009364656817,
    100008477011056,
    100004393218547,
    100004162095673,
    765519919,
    100007862437526,
    673526695,
    568149119,
    1697811353,
    100011783023166,
    100023025126395,
    776202649,
    100010514770824,
    616431988,
    787885331,
    100003717675032,
    100008902637442,
    509145351,
    100022169852770,
    100003139231798,
    705800842,
    100012080177870,
    100002120431750,
    100000599000066,
    100003800222244,
    100013847250718,
    100009016659078,
    1050708071,
    622955132,
    100003685748562,
    100026271730838,
    100011649454594,
    100003279072689,
    100000113971897,
    100007577228865,
    100010159627017,
    100002978119440,
    552547675,
    100000233561802,
    100011865823303,
    747791587,
    100006049839667,
    100017249400165,
    100000167996087,
    707235894,
    100024961696740,
    100012971479774,
    609137610,
    606321696,
    100015055449159,
    100022373826615,
    1297743194,
    100009541571638,
    566847479,
    100001919934247,
    100002328594916,
    100005148483414,
    520195870,
    633974594,
    864170253,
    100011714250954,
    100004365331513,
    755950566,
    100015034364424,
    100000291235056,
    1085603976,
    100002672343278,
    100015202423685,
    100002290670800,
    100006598234857,
    100012590406512,
    100013179825224,
    591053687,
    100022305518759,
    100012024250275,
    556070560,
    100008086926464,
    773675011,
    100007184323610,
    1711380057,
    1036625863,
    675727700,
    100002118395769,
    100005861740728,
    100006631712550,
    100000091812953,
    100002767750447,
    629057562,
    100007665705978,
    512709418,
    100008161598762,
    100004393218547,
    1586588660,
    100008401302290,
    663495382,
    569968143,
    100005711886827,
    100001463957996,
    100003939782975,
    100000878801289,
    629371709,
    100006693544706,
    1205852715,
    1277441054,
    100002430076651,
    562650523,
    100009814337446,
    568080910,
    100001762640288,
    100007927631710,
    100010942054753,
    100015650982601,
    722007755,
    1620891842,
    100004785279135,
    100004691910126,
    100010564202590,
    1003085112,
    1003085112,
    627467243,
    700515083,
    100023694143381,
    760359870,
    698386215,
    1456277399,
    100011887832406,
    100007774596620,
    1304401816,
    100017546648330,
    100003816552119,
    100003978603637,
    100002170817118,
    782370566,
    1113401192,
    100011255617063,
    1084429459,
    100004427646871,
    100004600515721,
    100002057081258,
    100000416208319,
    510253338,
    100017719606605,
    100000991624729,
    100000480409032,
    100006419400579,
    100003400151407,
    100002156582466,
    100024346100785,
    100000214744592,
    100011029067325,
    100000056179302,
    100002505117790,
    784846025,
    100024239887156,
    100007519903544,
    100003139231798,
    609209912,
    100012996310407,
    100002156787949,
    100012200795673,
    100007820263922,
    1556603761,
    100003624172015,
    100007706804274,
    100001342055144,
    100005678566674,
    100000128301099,
    100019344515270,
    100003677985307,
    100002046655842,
    100005007341158,
    100008461982336,
    100017008394622,
    100003789967189,
    100007295192788,
    100014398774403,
    100012896497279,
    100024736091502,
    100004030134236,
    100015033063067,
    100002840242620,
    100006660548518,
    691694616,
    100008848485036,
    100003890948197,
    100000798717189,
    100013875763408,
    100013841085016,
    100015635139980,
    100005160543001,
    100016995613167,
    100012908836334,
    100002106410383,
    100011384425182,
    855150011,
    100009393902296,
    596455649,
    656298295,
    100009592155073,
    100003612061170,
    100010633087384,
    100014072923946,
    100021386984920,
    100001288278066,
    100000268773877,
    100005073932029,
    614990029,
    100004866703368,
    1051710192,
    1127691580,
    100024854613148,
    100013824127265,
    100024282810903,
    100000123621179,
    100000220237367,
    100003612061170,
    100009418935409,
    100012345787861,
    100001585580895,
    100002649313957,
    100009976096961,
    100009387656213,
    1090623333,
    100001643334107,
    100009578717382,
    100024152675606,
    685900488,
    100001025829619,
    100003391896726,
    100011451273378,
    100007274760922,
    100023457674326,
    100012606541023,
    100008857633680,
    100007848996067,
    100011474362915,
    100019509579701,
    100002090317714,
    100010602184032,
    100013164133756,
    100011413258692,
    1286680021,
    100006086221086,
    100008658304932,
    637341898,
    100013864908030,
    100010282179948,
    510253338,
    100003169796865,
    100005627748719,
    100011259750284,
    100016653363351,
    100004427921423,
    100013368787420,
    100023325914407,
    538272551,
    100001822798611,
    100013954180314,
    100002643312458,
    1183571173,
    100006148815795,
    100006297765335,
    100000179599152,
    100006272553214,
    100011385962020,
    100015154938953,
    726700444,
    100021526398548,
    100024091131672,
    100023774255007,
    100024199532972,
    100022741327646,
    100014797542527,
    100011003081178,
    1090270049,
    100007981531629,
    100009420821589,
    100009956796519,
    100023177656790,
    100000546936184,
    100004930356301,
    100001720152428,
    100006381797586,
    100007691777786,
    100013661160122,
    661180710,
    505919976,
    100009778757056,
    100022848320551,
    100000016761217,
    799967136,
    1338117617,
    642091815,
    100006953828119,
    533492173,
    706389423,
    100013060963768,
    100000008692353,
    1612604055,
    100001893951744,
    100004866768661,
    100016418807576,
    100014509746767,
    100005032302829,
    100001583464476,
    100022203424304,
    100024914901730,
    100006953828119,
    100011076665574,
    100000691751211,
    850260580,
    621901180,
    100002069833845,
    100007426123637,
    599157141,
    1158074113,
    100000712537869,
    100004401945075,
    100013168801813,
    100002201361245,
    100006366702568,
    100012134239484,
    100000946630286,
    100017116968806,
    653761172,
    100008100002707,
    1456458725,
    513099971,
    100004659423174,
    100009658576902,
    100025678841374,
    100008165733289,
    1477136422,
    100004004426151,
    100002374096821,
    100012467255282,
    100008801477155,
    1008038055,
    640191814,
    1257562660,
    100013097141032,
    100016101843229,
    1036951081,
    1008584074,
    548404218,
    1283376318,
    509904123,
    100010288835181,
    100015835782211,
    1053564656,
    582694418,
    554301514,
    100003286852984,
    100001079646597,
    100024607242200,
    100003969739739,
    100011928015960,
    665070191,
    100004795356396,
    572590532,
    100013959885842,
    100023815700355,
    100020687739775,
    100004862535513,
    100007888905204,
    100002832823465,
    100003242465298,
    100002356743062,
    100009373696935,
    100000238594560,
    100007680397638,
    504255643,
    100002196068308,
    100000581216461,
    100022105943744,
    100000069446322,
    100003772886312,
    100002878010067,
    100005932507822,
    100005612199295,
    1100277749,
    100015546152382,
    573830316,
    1283358132,
    100024819909143,
    1423272849,
    100021992792759,
    100004004507609,
    100008607339846,
    100010923879690,
    100010504906020,
    100008998306938,
    100000606538310,
    590131490,
    1010379921,
    100011573830582,
    100004723240637,
    100010635406879,
    565349553,
    1013227634,
    769329814,
    779609803,
    516091654,
    569121915,
    100006497895495,
    100022261547474,
    100001874802736,
    100002146170691,
    1240251029,
    100015585128081,
    518456104,
    100010322711293,
    513543621,
    100005925843332,
    555550826,
    1397171606,
    100000147956724,
    100017625278046,
    626117205,
    702015792,
    846060470,
    686417026,
    100007286191631,
    100012163483002,
    100022843820353,
    100002023538504,
    100003203667355,
    710271405,
    100003135125194,
    100001217748204,
    1057354458,
    100012353859632,
    100003513352536,
    100003798377621,
    100002599327344,
    100004629454646,
    664091131,
    681299729,
    100010554136416,
    781770230,
    100008042468550,
    100001292365162,
    100014970034967,
    100017002835904,
    100005793702591,
    100007318504442,
    100008306298037,
    100009622866876,
    100022505498838,
    100006940331403,
    688622403,
    100011014504633,
    1592776399,
    100003462773461,
    100010170676379,
    720195256,
    100005762978655,
    512061136,
    100001629341963,
    100010983516835,
    100003094038118,
    100002833006259,
    100014474503492,
    100015923712169,
    100006138151465,
    701566830,
    100001618224905,
    100000409642490,
    1806185651,
    100023991180009,
    766273697,
    1031362078,
    100000674672198,
    100009087726350,
    100000306000912,
    100001508721348,
    100001158066042,
    730140503,
    516756815,
    585295304,
    541671976,
    100000399662833,
    703040349,
    100003504925553,
    100005296713867,
    100010225954616,
    100009624965831,
    100009384958032,
    510231453,
    100001391920845,
    100000523871227,
    538136322,
    100008332865209,
    100014988708970,
    100021351413106,
    100001685359697,
    100010260153685,
    100021775363503,
    100004890667447,
    100008131720334,
    100002167833634,
    100011312073234,
    100001377132894,
    100005905417283,
    100003194564391,
    686603266,
    100013173720649,
    100002040716529,
    100000024336284,
    1438843278,
    801723265,
    100014537831693,
    647529534,
    100012503089048,
    100003017841269,
    100013254797056,
    652375515,
    650959318,
    100009773138255,
    569305522,
    100000531519302,
    100008600671852,
    100014438258484,
    100005580192149,
    859280264,
    100000845164103,
    100004338132558,
    100000145128876,
    100020352199518,
    100006650295061,
    100007213201996,
    100002868215385,
    838565267,
    100010440066161,
    100014770151681,
    733700517,
    100001945219695,
    100003521235061,
    100002937908522,
    100012963211209,
    100007472112736,
    100021357914089,
    100015476520579,
    100024752855925,
    100006789078178,
    842164409,
    100023659481749,
    100002568349834,
    100004051638221,
    100006403780312,
    593958524,
    100017704680852,
    519204525,
    653783622,
    100000713156396,
    100006633095007,
    588028995,
    1362583142,
    514880845,
    777315472,
    100008485861349,
    100003889217113,
    100003285593547,
    646996373,
    100000442673411,
    100008482052595,
    100007007499973,
    100000746680151,
    100004680093197,
    100023452450617,
    100023272027728,
    100000923091297,
    100013667648493,
    100021719634366,
    1038872990,
    100000926043335,
    100005725456910,
    100023879272551,
    100004432546776,
    100007360722061,
    100001274201585,
    1491457691,
    100013447423932,
    685245574,
    100011075887265,
    100005096834035,
    100019647004828,
    100024089469326,
    100009279821890,
    100006474218805,
    100003139771360,
    100001083349908,
    653850305,
    100002566341868,
    100002147442935,
    100000706658072,
    1355720614,
    573590045,
    100013163233806,
    100004216961410,
    100021952549397,
    100001832253720,
    100017646370291,
    1645440148,
    100020083183100,
    731836061,
    100013752495684,
    100017625099009,
    100004140183933,
    100023743566639,
    100002165322977,
    100000806214559,
    100002665016105,
    100000998789175,
    567555494,
    1071983587,
    100013039442255,
    100001642385968,
    790204060,
    539951139,
    100009079105614,
    1274347143,
    1480440202,
    607270756,
    100016557880162,
    100005432233749,
    901695363,
    1705579289,
    100000826853051,
    100007752918709,
    100004920900770,
    545185954,
    1599406728,
    100016449338300,
    1801494065,
    100001096970714,
    100010452574313,
    100010452574313,
    100006148424461,
    100002158989904,
    100004312380696,
    678728827,
    100001631692294,
    100002108130516,
    619253250,
    1396244376,
    100000658168767,
    100002011491469,
    100008400288408,
    100010149006089,
    555790168,
    100021957772507,
    100014687433806,
    100017574978489,
    1121132252,
    100008598662845,
    655295902,
    100008892073505,
    100024996543702,
    100003716160798,
    100001830907760,
    100018127418484,
    100013750309296,
    100002104985969,
    100009524588916,
    560451299,
    100002174420867,
    100001225202638,
    1265683324,
    100009737265706,
    100010047102476,
    623630078,
    100008897110786,
    100003302703332,
    100009453646254,
    1050112931,
    100011250188235,
    538042157,
    100006374430806,
    100018189244507,
    100015132198533,
    100003591228439,
    100009343227980,
    100004726111027,
    100017290098792,
    100003546374833,
    100005888709724,
    100004245780031,
    100009018939733,
    100006768131480,
    100018231369083,
    100009208248788,
    556761999,
    1472948218,
    100007019892668,
    100001226116950,
    100013544982099,
    100024011564824,
    1680738353,
    616010392,
    100002159926803,
    100009833262441,
    100024666631729,
    100001763112797,
    507893641,
    100002454699028,
    100009472731183,
    100007432805878,
    100000187055465,
    100023835406819,
    100000505577950,
    100009361305828,
    756010530,
    100001348876805,
    100001286451212,
    100006443700533,
    813315256,
    100002551834725,
    100001592659503,
    100009983683782,
    100003513361065,
    100009527675983,
    1430490185,
    100024193260045,
    100014070122271,
    100002310700013,
    100006381963705,
    100008097702005,
    100015132198533,
    100003051136819,
    1571702265,
    100003759914418,
    100001235491946,
    100022287203106,
    100000586488726,
    100010404227599,
    500777220,
    100011990867055,
    100003218101099,
    878720542,
    100024535233311,
    100008661873233,
    100004886821340,
    100004400706670,
    100022975490338,
    100009402497089,
    100013284580128,
    100002310700013,
    1427984689,
    100002095807442,
    100023447501721,
    100023844384108,
    517870778,
    1643053553,
    1174891891,
    100001880788457,
    540046367,
    100011223489210,
    100003982082226,
    100009276223724,
    100010656226564,
    100000423642079,
    100016817791632,
    100024667127265,
    100009985777942,
    100005004103382,
    100022336890162,
    100010132631948,
    100007624951504,
    100024607775798,
    100009688020380,
    100001519442313,
    100007457556060,
    100016498031918,
    100011027285600,
    100002535657958,
    100011506268636,
    678292358,
    100001962795932,
    100003187251489,
    100017160463703,
    100013576219407,
    100020749459265,
    100009011980397,
    540988933,
    100000418994114,
    687857829,
    849420310,
    534935327,
    100002813511923,
    100005772759885,
    100009348826544,
    100015838573225,
    100003492273151,
    100004632223694,
    100006052545520,
    100003879207113,
    100008538064089,
    100004578019162,
    100022506465866,
    100004304954185,
    100011968756868,
    100000846797825,
    1001887387,
    100010247741009,
    100006606336321,
    100008820344806,
    1250961307,
    100018732281733,
    100001227019595,
    100024549970285,
    100018378573528,
    100001733142421,
    1602859179,
    815174658,
    100003242495306,
    100010326093208,
    100000965065344,
    100016567266308,
    100017360433470,
    100006619717223,
    100010337856696,
    100001653568637,
    100008421556952,
    100000086113897,
    100005492070014,
    100001399509689,
    100011757909837,
    850770023,
    100000328405087,
    100023921775513,
    100012768795329,
    100008175454166,
    100015420463501,
    100009701042795,
    100001169572948,
    100012882064285,
    100022116128262,
    100007730850377,
    1073512493,
    100010590064315,
    100007624471470,
    100003316745455,
    100011712070646,
    100005314149781,
    100011692097019,
    100006441029488,
    100005003075586,
    697390510,
    100003840772153,
    100013339573455,
    100005638562827,
    100008484941099,
    100009472178741,
    100001586889217,
    1396269282,
    714556029,
    100000583603024,
    100009431875503,
    100000348421131,
    100008633315662,
    100007035881539,
    100008848114761,
    100015146533032,
    100024737632468,
    100000535722865,
    100013253313812,
    100007625160962,
    100007804635313,
    764107382,
    100009545110554,
    100011640093064,
    100006142447473,
    100012102016437,
    1281452801,
    100002392389227,
    100002110699821,
    100010653160464,
    100009911055235,
    100009516925065,
    100005681198032,
    100004977318428,
    100002407636120,
    100008269028387,
    582226578,
    100006783452694,
    100002119397937,
    100013826112477,
    100000797763415,
    1351311809,
    100000262756663,
    100022765187396,
    872590598,
    100003119736158,
    100016821456846,
    100005267509318,
    738076389,
    100004762592257,
    100010993534407,
    100009008700680,
    1253176239,
    100008346406854,
    100003058624412,
    1842486995,
    100005930074774,
    100010754951522,
    100014646252717,
    687540084,
    1103387900,
    100013416485359,
    100025608644048,
    100003812738839,
    100023984552022,
    100014855921681,
    100003756338165,
    643640195,
    100017426439450,
    802475767,
    100017736164872,
    505118484,
    100005939521405,
    100011097790008,
    100021824261662,
    100003985052919,
    1636836502,
    100009889843306,
    618394326,
    100000473857563,
    100009372861991,
    516718815,
    100000285323133,
    100005311260973])->get();

    $uniques = [];
    foreach ($result as $c) {
        $uniques[$c->unique_id] = $c; // Get unique country by code.
    }
    
    dd(count($uniques));
});
